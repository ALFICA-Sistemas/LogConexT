<!DOCTYPE html>
  <head>

    <title>Registro de conexion</title>
    <!-- https://www.w3schools.com/html/html_layout.asp -->
      <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
      <link rel="stylesheet" type="text/css" href="css/comun.css" />
      <script src="js/comun.js"></script>
   </head>

  <body onload="setInterval(CargaImg, 30000)">
  
   <input type="file" multiple><br>
   <select></select><br>
   <textarea></textarea>

<script>
  const [input, select, textarea, reader] = [
    document.querySelector("input[type=file]")
    , document.querySelector("select")
    , document.querySelector("textarea")
    , new FileReader
  ];
  let [files, data, fn] = [
    [],
    [], (file, reader) => new Promise((resolve, reject) => {
      reader.onload = () => {
        reader.onload = reader.onerror = null;
        resolve(reader.result);
      }
      reader.onerror = reject;
      reader.readAsText(file);
    })
  ];
  input.onchange = async() => {
    select.innerHTML = "";
    files.length = data.length = 0;
    for (const file of input.files) {
      const {
        name
      } = file;
      const option = new Option(name, files.length);
      files.push(file);
      select.appendChild(option);
      let result = await fn(file, reader);
      data.push(result);
    }
  }

  select.onchange = () => {
    textarea.value = data[select.value];
  }
</script>

<!-- <select id="image-dropdown">
  <option value="image1.jpg">Image 1</option>
  <option value="image2.jpg">Image 2</option>
  <option value="image3.jpg">Image 3</option>
</select>
<img id="image-preview"> -->
    <header>Registro de conectividad este mes (usando ipify)</header>
    <img id="LogGraf" src="202309_ipify.png" alt="Log del mes">
    <footer id="subtit">-</footer>
  </body>

  <script>
    var Imagen = document.getElementById('LogGraf');

    function CargaImg(IDimagen, URLimagen){
      var tiempo = new Date();   // Leer el timestamp

      Imagen.src += '?'+tiempo;  // Usar el timestamp para hacer unico el URL de la imagen

      var tLocal = new Date(tiempo.getTime() - (tiempo.getTimezoneOffset() * 60000 )).toISOString();
      var tISO = tLocal.substr(0, 10)+" a las "+tLocal.substr(11, 5);
      document.getElementById("subtit").innerHTML = "Actualizado el "+tISO;

    }
  </script>

</html>
